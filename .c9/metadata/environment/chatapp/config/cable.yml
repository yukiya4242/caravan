{"filter":false,"title":"cable.yml","tooltip":"/chatapp/config/cable.yml","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":10,"column":0},"action":"remove","lines":["development:","  adapter: async","","test:","  adapter: test","","production:","  adapter: redis","  url: <%= ENV.fetch(\"REDIS_URL\") { \"redis://localhost:6379/1\" } %>","  channel_prefix: chatapp_production",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":36,"column":0},"action":"insert","lines":["# config/cable.ymlに以下の設定を追加","development:","  adapter: redis","  url: redis://localhost:6379/1","","test:","  adapter: async","","production:","  adapter: redis","  url: <%= ENV['REDIS_URL'] %>","  channel_prefix: realtime_chat_app_production","","# config/environments/development.rbに以下を追加","config.action_cable.url = \"ws://localhost:3000/cable\"","","# app/channels/application_cable/connection.rbを編集","module ApplicationCable","  class Connection < ActionCable::Connection::Base","    identified_by :current_user","","    def connect","      self.current_user = find_verified_user","    end","","    private","","    def find_verified_user","      if (current_user = env['warden'].user)","        current_user","      else","        reject_unauthorized_connection","      end","    end","  end","end",""]}]]},"ace":{"folds":[],"scrolltop":164.99999999999994,"scrollleft":0,"selection":{"start":{"row":36,"column":0},"end":{"row":36,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":10,"state":"start","mode":"ace/mode/yaml"}},"timestamp":1682400770539,"hash":"c81363e6ce8f4dc0e786181febd1ad5bcb435bd9"}